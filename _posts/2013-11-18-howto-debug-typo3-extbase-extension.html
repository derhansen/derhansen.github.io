---
layout: post
title: Howto debug a TYPO3 ExtBase extension with PhpStorm and XDebug
date: '2013-11-18T15:54:00.000+01:00'
author: Torben Hansen
tags:
- Chrome
- XDebug
- Extbase
- TYPO3
- Debug
modified_time: '2013-11-18T15:54:33.010+01:00'
thumbnail: http://3.bp.blogspot.com/-dC87g-AAJ5c/Uom0tNLZppI/AAAAAAAAIC0/FK-vZLZFiuM/s72-c/phpstorm-server-setup.jpg
blogger_id: tag:blogger.com,1999:blog-6517038209122183182.post-6369012310022888649
blogger_orig_url: http://www.derhansen.de/2013/11/howto-debug-typo3-extbase-extension.html
permalink: /2013/11/howto-debug-typo3-extbase-extension.html
---

<br />In this article I will show you <b>step by step</b>, how simple it is to setup <b>PhpStorm </b>and <b>XDebug </b>to debug a <b>TYPO3 ExtBase extension</b>. Of course you can also debug every other TYPO3 component with this setup.<br /><br /><b>Setup&nbsp;</b><br /><br />Before you can start with debugging, you need to setup <b>XDebug</b>, a <b>debugging extension</b> for you webbrowser and your <b>PhpStorm project</b>.<br /><br /><b>XDebug Setup</b><br />First you need to install XDebug on you system and add the following lines to your xdebug.ini (on Ubuntu 12.04 the file is located at /etc/php5/conf.d/xdebug.ini) configuration file.<br /><pre><code><br />xdebug.max_nesting_level = 500<br /><br />xdebug.idekey = PHPSTORM<br />xdebug.remote_host = 127.0.0.1<br />xdebug.remote_enable = 1<br />xdebug.remote_port = 9000<br />xdebug.remote_handler = dbgp<br />xdebug.remote_mode = req<br /><br /></code></pre>Make sure you <b>restart </b>your <b>webserver</b> after you have added updated the XDebug configuration file.<br /><br /><b>Browser Setup</b><br />Next you need to install a <b>debug extension</b> for you webbrowser. Since I use Google Chrome, I install the <a href="https://chrome.google.com/webstore/detail/xdebug-helper/eadndfjplgieldjbigjakmdgkmoaaaoc" target="_blank">Xdebug helper</a>, which is open source (on GitHub) and available on the <a href="https://chrome.google.com/webstore/detail/xdebug-helper/eadndfjplgieldjbigjakmdgkmoaaaoc" target="_blank">Google Chrome Web Store</a>.<br /><br /><b>PHPStorm Setup</b><br />Finally configure the <b>server </b>in you PhpStorm project settings like shown below.<br /><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/-dC87g-AAJ5c/Uom0tNLZppI/AAAAAAAAIC0/FK-vZLZFiuM/s1600/phpstorm-server-setup.jpg" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="156" src="http://3.bp.blogspot.com/-dC87g-AAJ5c/Uom0tNLZppI/AAAAAAAAIC0/FK-vZLZFiuM/s400/phpstorm-server-setup.jpg" width="400" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Server Configuration</td></tr></tbody></table><br />There are 2 important things to keep in mind.<br /><ol><li>The <b>host</b> must not contain http://&nbsp;</li><li><b>Symlinked files/directories</b> must be mapped manually. On the screenshot above I map the typo3_src folder and the project-folder to to real location on my filesystem.</li></ol>That's it - now you are ready to debug your TYPO3 ExtBase extension in PhpStorm.<br /><br /><b><br /></b><b>Start debugging</b><br />Now it's time to start the debug session.<br /><br />1. Enable your browser debug extension for the website you want to debug. In Chrome you just click on the debug icon.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-NtVpbjbDOhE/Uom4ZUzL6SI/AAAAAAAAIDE/RpEAv6N33fo/s1600/chrome-debug.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="190" src="http://3.bp.blogspot.com/-NtVpbjbDOhE/Uom4ZUzL6SI/AAAAAAAAIDE/RpEAv6N33fo/s400/chrome-debug.png" width="400" /></a></div><br />2. Enable PhpStorm to listen to debug sessions by clicking on the icon shown below.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-JKfMlS_RXCU/Uom5yt1GF5I/AAAAAAAAIDQ/mugPJXSot4c/s1600/phpstorm-start-debug.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="36" src="http://1.bp.blogspot.com/-JKfMlS_RXCU/Uom5yt1GF5I/AAAAAAAAIDQ/mugPJXSot4c/s400/phpstorm-start-debug.png" width="400" /></a></div><br />3. Set a breakpoint in your controller<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-W-KoyD_Jnr0/Uom7pCoHZFI/AAAAAAAAIDY/98PmwvTluaQ/s1600/phpstorm-breakpoint.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="161" src="http://1.bp.blogspot.com/-W-KoyD_Jnr0/Uom7pCoHZFI/AAAAAAAAIDY/98PmwvTluaQ/s400/phpstorm-breakpoint.png" width="400" /></a></div><br />4. Open the website on the server. PhpStorm now catches the incoming debug session and stops at the first breakpoint.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-yo_jj8ahQAY/Uom8s5pUz2I/AAAAAAAAIDg/RwELqfoLMOw/s1600/phpstorm-debug2.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="267" src="http://1.bp.blogspot.com/-yo_jj8ahQAY/Uom8s5pUz2I/AAAAAAAAIDg/RwELqfoLMOw/s400/phpstorm-debug2.png" width="400" /></a></div><br />As you see on the screenshot above, PhpStorm stops at the breakpoint which has been set in step 3.<br /><br />Happy debugging!<br /><br /><br /><b>Troubleshooting</b><br /><br /><u>1. PhpStorm claims port 9000 is busy.</u><br />I had this error on an Ubuntu 12.04 development machine. Here <b>php-fpm</b> was installed and was listening on port 9000, so it was conflicting with XDebug. to resolve this problem I changed to port for php-fpm to listen to port 9001 instead by editing the configuration file /etc/php5/fpm/pool/www.conf<br /><br /><u>2. Debugger does'nt stop at breakpoint</u><br />When the debugger does'nt stop at the breakpoint, then it could be, that there is something <b>wrong with the path mapping</b>. I resolved this by adding xdebug_break(); to my code which resulted PhpStorm in stopping at the line with xdebug_break() and I could fix the path mappings at this point manually.<br /><br /><br />
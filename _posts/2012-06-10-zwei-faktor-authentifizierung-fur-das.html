---
layout: post
title: Zwei-Faktor-Authentifizierung für das TYPO3 Backend
date: '2012-06-10T19:49:00.001+02:00'
author: Torben Hansen
tags:
- YubiKey
- two-factor-authentication
- TYPO3
modified_time: '2012-06-10T19:49:34.226+02:00'
thumbnail: http://1.bp.blogspot.com/-wIG-lG3AP3o/T9TZi-oVEgI/AAAAAAAAAkE/pDRraNVPEXU/s72-c/yubikey-login.png
blogger_id: tag:blogger.com,1999:blog-6517038209122183182.post-2466211286198022382
blogger_orig_url: http://www.derhansen.de/2012/06/zwei-faktor-authentifizierung-fur-das.html
permalink: /2012/06/zwei-faktor-authentifizierung-fur-das.html
---

Wenn ein TYPO3 Backend Login erst mal geknackt ist, hat es ein Angreifer nicht mehr allzu schwer sich Zugang zu Daten (z.B. Userdaten) oder sogar zum Webserver zu verschaffen. Glücklicherweise kann man TYPO3 auch um eigene <b>Authentifizierungs-Dienste</b> erweitern, sodass ein Angreifer mit gestohlenen Benutzerdaten nicht automatisch Zugriff auf das TYPO3 Backend bekommt.<br /><br />So einen Authentifizierungs-Dienst habe ich mir vor ein paar Jahren mal programmiert, nachdem ein Arbeitskollege mir einen <a href="http://www.yubico.com/yubikey" target="_blank">YubiKey</a> zur Verfügung gestellt hat. Der YubiKey ist ist Token, welchen man an einen USB Port seines Rechners anschließt und welcher dann per Knopfdruck ein OTP (one time password) generiert. Das OTP kann dann von einen Cloud Authentifizierungs-Cluster des Herstellers oder auch durch einen eigenen&nbsp;Authentifizierungs-Server verifiziert werden. Ganz simpel und vor allem Plattform-Unabhängig, denn der USB Token funktioniert unter jedem Betriebssystem gleich.<br /><br />Die Veröffentlichung meiner Extension scheiterte seinerzeit an der Erstellung der Dokumentation, da ich keine Lust hatte mir meinen Windows Rechner mit OpenOffice vollzumüllen. Nun, wo ich komplett auf Linux umgestiegen bin, habe ich wohl keine Entschuldigung mehr und habe mich nun endlich mal hingesetzt und eine Dokumentation erstellt und die Extension <b>sf_yubikey</b> heute veröffentlicht.<br /><h3> Was macht die Extension sf_yubikey?</h3><div>Die Extension erweitert das TYPO3 Backend Login um ein zusätzliches Feld, wo der User beim Backend Login neben seinen Userdaten auch ein OTP eingeben muss. Da der YubiKey USB Token auf Knopfdruck das OTP "eingibt", ist der neue Login-Prozess nicht sonderlich komplizierter geworden.</div><div><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-wIG-lG3AP3o/T9TZi-oVEgI/AAAAAAAAAkE/pDRraNVPEXU/s1600/yubikey-login.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="235" src="http://1.bp.blogspot.com/-wIG-lG3AP3o/T9TZi-oVEgI/AAAAAAAAAkE/pDRraNVPEXU/s400/yubikey-login.png" width="400" /></a></div><div><br /></div>Der Backend Loginprozess erhält somit eine&nbsp;Zwei-Faktor-Authentifizierung, wo ein Angreifer nun neben den Benutzernamen und das dazugehörige Passwort auch das YubiKey USB Token das User braucht, um sich erfolgreich am TYPO3 Backend anzumelden.<br /><br />Die&nbsp;Zwei-Faktor-Authentifizierung kann im Backend von TYPO3 pro User festgelegt werden.<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-Vz3zFOaQ0aI/T9TaXjATI9I/AAAAAAAAAkM/21c_M13s-VI/s1600/user-settings.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="152" src="http://1.bp.blogspot.com/-Vz3zFOaQ0aI/T9TaXjATI9I/AAAAAAAAAkM/21c_M13s-VI/s320/user-settings.png" width="320" /></a></div><br /><h3> Voraussetzungen für den Gebrauch von sf_yubikey</h3>Die Extension funktioniert leider nicht out-of-the-box. Zum einen muss der Webserver über&nbsp;<b>CURL</b> und <b>PEAR</b> verfügen. Das sollte heutzutage aber eigentlich zum Standard gehörten. Zum anderen muss man die PHP Klasse <b>Auth_Yubico</b> installiert haben, welche aber dank PEAR recht einfach zu installieren ist. Die PHP Klasse erhält man <a href="http://code.google.com/p/php-yubico/" target="_blank">hier</a>.<br /><br />Neben den Server-Voraussetzungen braucht man natürlich auch einen YubiKey sowie einen Yubico API Key, welchen man <a href="https://upgrade.yubico.com/getapikey/" target="_blank">hier</a> kostenlos erstellen lassen kann.<br /><br /><h3> Feedback erwünscht</h3>Ich habe die Extension wie erwähnt heute veröffentlicht und bin gespannt, ob ich auch Feedback erhalten werden und ob sie überhaupt jemand nutzt. Im TYPO3 Forge habe ich für Feedback und Bugreports ein entsprechendes <a href="http://forge.typo3.org/projects/extension-sf_yubikey" target="_blank">Projekt</a> eingerichtet.
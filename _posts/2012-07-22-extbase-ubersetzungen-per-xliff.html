---
layout: post
title: ExtBase - Übersetzungen per XLIFF einbinden
date: '2012-07-22T14:18:00.000+02:00'
author: Torben Hansen
tags:
- XLIFF
- ".xlf"
- Extbase
- TYPO3
- Übersetzungen
modified_time: '2012-07-22T14:20:31.830+02:00'
blogger_id: tag:blogger.com,1999:blog-6517038209122183182.post-493041674610986341
blogger_orig_url: http://www.derhansen.de/2012/07/extbase-ubersetzungen-per-xliff.html
permalink: /2012/07/extbase-ubersetzungen-per-xliff.html
---

Seit Version 4.6 nutzt TYPO3 das XLIFF Format zum speichern von Sprachdateien. Das neue Format ist kompatibel mit Übersetzungsservern und bietet noch einige andere Vorteile wie z.B. Pluralformen oder Übersetzungsvorschläge.<br /><br />Wer mit TYPO3 4.6 oder TYPO3 4.7 eine mehrsprachige Extbase Extension entwickelt, wird sich automatisch mit dem neuen Format auseinander setzen müssen, da der Extension Builder per Default nun auch <b>.xlf-Sprachdateien</b> generiert. Wie aber genau bindet man eine neue Sprache in seine Extension ein?<br /><br />Als <b>Basissprache</b> wird immer von <b>Englisch</b> ausgegangen. Nach dem Anlegen einer neuen Extension mit dem Extension Builder hat man in der Regel eine Sprachdatei namens <b>locallang.xlf</b>, welche sich im Ordner Resources\Private\Language\ befindet.<br /><br /><b>Original XLIFF Sprachdatei in englischer Sprache</b><br /><pre><code><br />&lt;?xml version="1.0" encoding="utf-8" standalone="yes" ?&gt;<br />&lt;xliff version="1.0"&gt;<br /> &lt;file source-language="en" datatype="plaintext" original="messages" date="2012-07-40T13:35:40Z" product-name="loc_test"&gt;<br />  &lt;header/&gt;<br />  &lt;body&gt;<br /><br />   &lt;trans-unit id="tx_loctest_domain_model_testtable"&gt;<br />    &lt;source&gt;Testtable&lt;/source&gt;<br />   &lt;/trans-unit&gt;<br />   &lt;trans-unit id="tx_loctest_domain_model_testtable.title"&gt;<br />    &lt;source&gt;Title&lt;/source&gt;<br />   &lt;/trans-unit&gt;<br />   &lt;trans-unit id="tx_loctest_domain_model_testtable.text"&gt;<br />    &lt;source&gt;Description&lt;/source&gt;<br />   &lt;/trans-unit&gt;<br />   <br />  &lt;/body&gt;<br /> &lt;/file&gt;<br />&lt;/xliff&gt;<br /></code></pre><br />Möchte man nun z.B. eine deutsche Übersetzung für die oben gezeigte Sprachdatei generieren, erstellt man im gleichen Ordner eine Kopie der bestehenden Datei und nennt diese <b>de.locallang.xlf</b><br /><br />Folgende Änderungen muss man in der kopierten Datei vornehmen. Zum einen muss man die Ziel-Sprache angeben (siehe unten in Zeile 3 <b>target-language="de"</b>) und zum anderen muss man für jeden zu übersetzenden Eintrag jeweils einen neuen Eintrag für die Zielsprache anlegen (gekennzeichnet durch das <b>target</b>-Tag)<br /><br /><b>Übersetzte XLIFF Sprachdatei in deutscher Sprache</b><br /><pre><code><br />&lt;?xml version="1.0" encoding="utf-8" standalone="yes" ?&gt;<br />&lt;xliff version="1.0"&gt;<br /> &lt;file source-language="en" target-language="de" datatype="plaintext" original="messages" date="2012-07-40T13:35:40Z" product-name="loc_test"&gt;<br />  &lt;header/&gt;<br />  &lt;body&gt;<br /><br />   &lt;trans-unit id="tx_loctest_domain_model_testtable"&gt;<br />    &lt;source&gt;Testtable&lt;/source&gt;<br />                                &lt;target&gt;Testtabelle&lt;/target&gt;<br />   &lt;/trans-unit&gt;<br />   &lt;trans-unit id="tx_loctest_domain_model_testtable.title"&gt;<br />    &lt;source&gt;Title&lt;/source&gt;<br />                                &lt;target&gt;Titel&lt;/target&gt;<br />   &lt;/trans-unit&gt;<br />   &lt;trans-unit id="tx_loctest_domain_model_testtable.text"&gt;<br />    &lt;source&gt;Description&lt;/source&gt;<br />                                &lt;target&gt;Beschreibung&lt;/target&gt;<br />   &lt;/trans-unit&gt;<br />   <br />  &lt;/body&gt;<br /> &lt;/file&gt;<br />&lt;/xliff&gt;<br /></code></pre><br />Fall man bestimmte Einträge nicht übersetzt, greift ein Fallback-System und es wird jeweils der Eintrag der Originalsprache angezeigt. Dieses funktioniert nur dann, wenn man den ganzen Eintrag beginnend ab dem entsprechenden trans-unit-Tag löscht. Es reicht nicht, einfach das target-Tag wegzulassen, denn dann wird gar nichts als Übersetzung für den Eintrag angezeigt.<br /><br />
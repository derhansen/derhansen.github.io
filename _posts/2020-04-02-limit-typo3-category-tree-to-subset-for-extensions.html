---
layout: post
title: How to limit the TYPO3 category tree to a subset of categories for extension
  records
date: '2020-04-02T15:26:00.000+02:00'
author: Torben Hansen
tags:
- system categories
- limit
- TYPO3
- subset
modified_time: '2020-04-02T15:26:34.360+02:00'
thumbnail: https://1.bp.blogspot.com/-50bdW9MTdM0/XoTZTIle1hI/AAAAAAAAlC8/TuVy2bBNPZskJWXOGXKTlnECnMNKJGgdwCLcBGAsYHQ/s72-c/typo3-full-category-tree.png
blogger_id: tag:blogger.com,1999:blog-6517038209122183182.post-837956653386698371
blogger_orig_url: http://www.derhansen.de/2020/04/limit-typo3-category-tree-to-subset-for-extensions.html
permalink: /2020/04/limit-typo3-category-tree-to-subset-for-extensions.html
---

In many TYPO3 projects I've been working in, the TYPO3 category system is used to structure content by one or multiple categories. A typical category tree I often see is build up as shown in the example below:<br /><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="https://1.bp.blogspot.com/-50bdW9MTdM0/XoTZTIle1hI/AAAAAAAAlC8/TuVy2bBNPZskJWXOGXKTlnECnMNKJGgdwCLcBGAsYHQ/s1600/typo3-full-category-tree.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" data-original-height="311" data-original-width="331" src="https://1.bp.blogspot.com/-50bdW9MTdM0/XoTZTIle1hI/AAAAAAAAlC8/TuVy2bBNPZskJWXOGXKTlnECnMNKJGgdwCLcBGAsYHQ/s1600/typo3-full-category-tree.png" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Full TYPO3 category tree</td></tr></tbody></table><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: left;">This is a very plain way to create a category tree and the structure in the example is limited to 3 independent main categories (Events, Products, Staff).&nbsp;</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">Quite often, the shown example category tree is used system wide in TYPO3 and all main categories are shown for <b>all record types</b>. This can be <b>confusing for editors</b>, since when you for example want to assign categories for e.g. event records, why should one see and be able to select the categories "Products" and "Staff" including all subcategories?</div><br />Fortunately TYPO3 can be configured to limit the category tree for tables to a given root category. As an example, I limit the shown categories for event records to only "Event" categories. I assume that the category "Events" has the sys_category UID 1.<br /><br /><b>PageTS example</b><br /><br /><pre><code>TCEFORM.tx_sfeventmgt_domain_model_event.category.config.treeConfig.rootUid = 1</code></pre><br />In PageTS such configuration options can be set for any record as long as the following configuration path is met: <b>TCEFORM.[tableName].[fieldName].[propertyName]</b><br /><br />The fieldName is usually "categories" or "category", but this can also be different depending on how categories are implemented in 3rd party extensions.<br /><br />The PageTS setting can also be set in TCA as shown below.<br /><br /><b>TCA example</b><br /><pre><code><br />$GLOBALS['TCA']['tx_sfeventmgt_domain_model_event']['columns']['category']['config']['treeConfig']['rootUid'] = 1;<br /></code></pre><br />As a result, the category tree for event records is now limited to the category "Events" and all subcategories.<br /><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="https://1.bp.blogspot.com/-fmozTHxlctU/XoTeapZGDtI/AAAAAAAAlDI/gQjPnaItGaMHd92QBbeWMMoUVI4YdUQ9ACLcBGAsYHQ/s1600/typo3-limited-category-tree.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" data-original-height="154" data-original-width="332" src="https://1.bp.blogspot.com/-fmozTHxlctU/XoTeapZGDtI/AAAAAAAAlDI/gQjPnaItGaMHd92QBbeWMMoUVI4YdUQ9ACLcBGAsYHQ/s1600/typo3-limited-category-tree.png" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">TYPO3 category tree limited to a subcategories of one main category</td></tr></tbody></table><br />I think this is way more clear for an editor than it was before. In general, this can be configured for every table in the TYPO3 TCA (e.g. pages, files, extensions, ...)<div><br /></div><div>The configuration only allows to define one UID as root for the category tree. If more flexibility is needed to limiting the category tree, then&nbsp;TCEFORM.[tableName].[fieldName].[config][foreign_table_where] may be the place to add own custom conditions.<br /><br /></div>
---
layout: post
title: TYPO3 6.2 - How to create a custom header layout and keep the alignment field
  working
date: '2015-08-16T13:35:00.001+02:00'
author: Torben Hansen
tags:
- alignment
- TYPO3
- custom header
modified_time: '2015-08-16T13:39:12.518+02:00'
thumbnail: http://3.bp.blogspot.com/-2cVdb0J8rq4/Vc8nbNdt_hI/AAAAAAAAPoc/jDVOcgjnwiM/s72-c/Bildschirmfoto%2B2015-08-15%2Bum%2B13.49.31.png
blogger_id: tag:blogger.com,1999:blog-6517038209122183182.post-3697271603460233544
blogger_orig_url: http://www.derhansen.de/2015/08/typo3-custom-header-layout-with-alignment.html
permalink: /2015/08/typo3-custom-header-layout-with-alignment.html
---

<b>tl;dr:</b> When you add custom headers layouts to TYPO3, always keep in mind to&nbsp;<b>retain original functionality</b>&nbsp;of the&nbsp;<b>alignment select field </b>as shown at the end of this blogpost (<i>solution 1</i> or <i>solution 2</i>), so editors don't get confused.<br /><br /><br />If you use <b>CSS Styled Content</b> in TYPO3, there are many tutorials on the internet showing how to configure <b>custom headers</b>. So why do I write another article about this you may ask. Well, in a project I "just" needed to create a <b>custom header layout</b>, where the user could use the TYPO3 <b>"alignment"-field</b> to select the alignment of the custom header. The resulting HTML should include the class "custom_class" like shown below:<br /><pre><code><br />&lt;h1 class="custom_class"&gt;TYPO3 Content Management System&lt;/h1&gt;<br /></code></pre><br />After some time of unsuccessful research, I finally ended up with the solutions shown below (at the end of the blogpost).<br /><br /><h3>The standard solution (not recommended)</h3><br />Besides many <b>non-working</b> or <b>outdated solutions</b> (e.g. <i>{register:headerStyle}</i> has been deprecated with TYPO3 4.7 I guess) you may find solutions which instruct you to do as following:<br /><br />1. Define a custom header style in Page TSConfig.<br /><pre><code><br />TCEFORM.tt_content.header_layout {<br />    addItems.10 = Header with custom layout<br />}<br /></code></pre><br />2. Add TypoScript to inherit the header style from lib.stdheader.10.1 and finally overwrite the dataWrap attribute.<br /><pre><code><br />lib.stdheader.10.10 &lt; lib.stdheader.10.1<br />lib.stdheader.10.10 {<br />  dataWrap = &lt;h1 class="custom_class"&gt;|&lt;/h1&gt;<br />}<br /></code></pre><br />What is wrong with this solution? Well, did you ever try to set the <b>header alignment</b> for a custom header, which is configured as shown above?<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-2cVdb0J8rq4/Vc8nbNdt_hI/AAAAAAAAPoc/jDVOcgjnwiM/s1600/Bildschirmfoto%2B2015-08-15%2Bum%2B13.49.31.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="137" src="http://3.bp.blogspot.com/-2cVdb0J8rq4/Vc8nbNdt_hI/AAAAAAAAPoc/jDVOcgjnwiM/s640/Bildschirmfoto%2B2015-08-15%2Bum%2B13.49.31.png" width="640" /></a></div><br /><br /><b><u>It&nbsp;does'nt work</u></b>! The&nbsp;<b>editor may get confused</b>&nbsp;and claim, that TYPO3 is not working correct, because the alignment selection in the backend doesn't affect the frontend.<br /><br /><h3>Why is the alignment not working?</h3><br />In order to remain the alignment that is set by CSS Styled Content, we need to understand how CSS Styled Content technically sets it. When the editor sets the alignment of a header to <b>"Center"</b>, the resulting <b>HTML</b>&nbsp;<b>header tag </b>will include<b>&nbsp;</b>the CSS class <b>"csc-header-alignment-center"</b>, which controls the header alignment in the frontend.<br /><br />What happens "under the hood" is as following: A look into the <b>TypoScript of CSS Styled Content</b> from TYPO3 6.2.14 shows, that <a href="https://github.com/TYPO3/TYPO3.CMS/blob/6.2.14/typo3/sysext/css_styled_content/static/setup.txt#L182" target="_blank">header alignments</a> are loaded into a register called <i>headerClass</i>, which is used in the <a href="https://github.com/TYPO3/TYPO3.CMS/blob/6.2.14/typo3/sysext/css_styled_content/static/setup.txt#L237" target="_blank">dataWrap</a> attribute to set all classes for the resulting header. And this is the reason, why the example above does not work as expected. <b>Overwriting</b> the <b>dataWrap </b>attribute <b>removes the alignment </b>set&nbsp;by CSS Styled Content.<br /><br /><h3>Solution 1 - extending the headerClass register</h3><br />As we now know, that we need to include the register <i>headerClass</i>&nbsp;in the dataWrap attribute to keep the alignment, we just extend the value of the headerClass register.<br /><br />1. Define a custom header style in Page TSConfig.<br /><pre><code><br />TCEFORM.tt_content.header_layout {<br />    addItems.10 = Header with custom layout<br />}<br /></code></pre><br />2. Load the <i>original register</i> into a <b>new register</b> (headerClassFor10) and add a new TEXT content object to the existing COA (content object array)<br /><br /><pre><code><br />lib.stdheader.3.headerClassFor10 &lt; lib.stdheader.3.headerClass<br />lib.stdheader.3.headerClassFor10.cObject {<br />    5 = TEXT<br />    5.noTrimWrap = |custom_class ||<br />}<br />lib.stdheader.10.10 &lt; lib.stdheader.10.1<br />lib.stdheader.10.10.dataWrap = &lt;h1{register:headerClassFor10}&gt;|&lt;/h1&gt;<br /></code></pre><br />The resulting header tag now includes the CSS classes set by CSS Styled Content and the new class "custom_class".<br /><pre><code><br />&lt;h1 class="custom_class csc-header-alignment-center"&gt;TYPO3 Content Management System&lt;/h1&gt;<br /></code></pre><br />If you have several custom header layouts, make sure, that you define a new register for each custom header layout (e.g. <b>headerClassFor10</b> and <b>headerClassFor11</b> in case you have defined header <b>10</b> and <b>11)</b>.<br /><br /><h3>Solution 2 - extending the dataWrap with a span-tag</h3><br />If you don't like solution 1, you can use the solution shown below, which just adds a <b>HTML span tag inside</b> the <b>header tag</b> (which is valid for both HTML4 and HTML5). This time, I just show you how the TypoScript for the custom header should look like (you've already seen the Page TSConfig 2 times).<br /><pre><code><br />lib.stdheader.10.10 &lt; lib.stdheader.10.1<br />lib.stdheader.10.10 {<br />  dataWrap = &lt;h1{register:headerClass}&gt;&lt;span class="custom_class"&gt;|&lt;/span&gt;&lt;/h1&gt;<br />}<br /></code></pre><br />The resulting HTML output for this header is as following:<br /><br /><pre><code>&lt;h1 class="csc-header-alignment-center"&gt;&lt;span class="custom_class"&gt;TYPO3 Content Management System&lt;/span&gt;&lt;/h1&gt;<br /></code></pre><br /><br /><br /><br /><br />
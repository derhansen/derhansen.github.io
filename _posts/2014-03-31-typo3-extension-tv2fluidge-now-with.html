---
layout: post
title: TYPO3 - Extension tv2fluidge now with support for multilingual websites
date: '2014-03-31T15:42:00.001+02:00'
author: Torben Hansen
tags:
- multilingual
- Fluidtemplate
- TemplaVoila
- Grid Elements
- TYPO3
modified_time: '2014-03-31T15:42:16.859+02:00'
thumbnail: http://1.bp.blogspot.com/-TO4RCsptNuU/UzQNEAa4S2I/AAAAAAAAIqY/_kMhI3CMT_g/s72-c/1+-+multilang-fce.png
blogger_id: tag:blogger.com,1999:blog-6517038209122183182.post-862519446395547144
blogger_orig_url: http://www.derhansen.de/2014/03/typo3-extension-tv2fluidge-now-with.html
permalink: /2014/03/typo3-extension-tv2fluidge-now-with.html
---

For some month ago I published an <a href="http://www.derhansen.de/2014/01/typo3-in-place-migration-from.html" target="_blank">article</a> about the first version of my extension&nbsp;tv2fluidge, which helps <b>migrating content</b> of a TYPO3 website made with <b>TemplaVoila</b> to <b>Fluidtemplate </b>and <b>GridElements</b>. The first version of tv2fluidge still had some open issues, which I resolved in the meantime.<br /><br />First of all, I raised the version <b>compatibility level</b> to TYPO3 6.1, since I used the extension to successfully migrated a TYPO3 6.1 website made with TemplaVoila. Also I found some small bugs, which also have been fixed. The last big task was the migration of a <b>multilingual website</b> made with TemplaVoila.<br /><br />So I started to migrate &nbsp;a <b>multilingual TYPO3 4.7</b> website made with TemplaVoila to Fluidtemplate and Grid Elements. After I had processed all 3 migration steps with the webiste, I was a little bit disappointed. The FCE and content migration for the default language&nbsp;worked&nbsp;as expected, but translated content element were not in the right order and the migrated GridElements were messed up when it comes to <b>translated content </b>in Grid Elements columns. Also I had some trouble with Grid Elements, where the original TemplaVoila FCE had the <b>language</b> set to <b>"all languages"</b>, because the Grid Element columns in the TYPO3 backend showed all content elements for all languages mulitple times. After some research, I found out that those problems seem to be fixed in later versions of Grid Elements, but not in the version available for TYPO3 4.5 and 4.7.<br /><br />Below is a screenshot of a TemplaVoila page with a Flexible content element and translated page content.<br /><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://1.bp.blogspot.com/-TO4RCsptNuU/UzQNEAa4S2I/AAAAAAAAIqY/_kMhI3CMT_g/s1600/1+-+multilang-fce.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://1.bp.blogspot.com/-TO4RCsptNuU/UzQNEAa4S2I/AAAAAAAAIqY/_kMhI3CMT_g/s1600/1+-+multilang-fce.png" height="233" width="400" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Original page and Flexible Content Element</td></tr></tbody></table>Atfer the migration, the resulting page and grid element looked like shown on the next screenshot.<br /><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/-g82NkSiB_tI/UzQNDF9QmOI/AAAAAAAAIqQ/dk0_XS75fkw/s1600/2+-+multilang-ge-after-migration.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://3.bp.blogspot.com/-g82NkSiB_tI/UzQNDF9QmOI/AAAAAAAAIqQ/dk0_XS75fkw/s1600/2+-+multilang-ge-after-migration.png" height="285" width="400" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Page and Grid Element after migration</td></tr></tbody></table>As you can see, the Grid Element with the language set to "all languages" shows content for all languages. Also the <b>sorting </b>of the translated content elements is'nt correct when you compare it with the original conent elements for the default language.<br /><br />So in order to migrate my multilingual TYPO3 websites made with TYPO3 4.7 I had to find a solution how to <b>automatically migrate</b> and <b>reassign</b> child content elements for Grid Elements with has "all languages" configured. Also I had to find a way how to fix the <b>sorting</b> of <b>translated content elements</b>.<br /><br /><b>Handling Grid Elements with language set to "all languages"</b><br /><br />I came to the decission, that it would be best to have an <b>individual translated Grid Element</b> for each page language. Having this, I could <b>reassign all translated child content elements</b> to the individual translated Grid Elements.<br /><br />The updated version of tv2fluidge contains a <b>conversion utility</b> to handle exactly this situation. It searches all Grid Elements, where the language ist set to "all languages" and then <i>clones</i> those Grid Elements to the amount of translations for each individual page. Then it reassigns all child content elements to the desired columns of the translated Grid Elements so you end up with a <b>clean translated content structure</b> in the TYPO3 page module.<br /><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://4.bp.blogspot.com/-7n2qcy69zoI/UzQNC5hUsuI/AAAAAAAAIqM/dTAkxldTbTw/s1600/3+-+multilang-ge-final.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://4.bp.blogspot.com/-7n2qcy69zoI/UzQNC5hUsuI/AAAAAAAAIqM/dTAkxldTbTw/s1600/3+-+multilang-ge-final.png" height="177" width="400" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Page view, where the Grid Element has been cloned to each individual language <br />and translated content elements reassigned</td></tr></tbody></table>The list module for this page shows how the Grid Element and the content elements are associated.<br /><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://1.bp.blogspot.com/-9uFIMLTAK_k/UzQNDlxwgtI/AAAAAAAAIqU/ouh37WJtgNo/s1600/4+-+multilang-ge-listview.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://1.bp.blogspot.com/-9uFIMLTAK_k/UzQNDlxwgtI/AAAAAAAAIqU/ouh37WJtgNo/s1600/4+-+multilang-ge-listview.png" height="148" width="400" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Listview for the page with the Grid Element</td></tr></tbody></table><br /><br />After conversion, there is ony one thing you have to do manually. If the original Flexible Content Element had FlexForm settings (e.g. input-fields or images), you must manually migrate the content and reconfigure the Grid Element as described in the <a href="https://github.com/derhansen/sf_tv2fluidge/tree/develop#post-process-steps" target="_blank">extension manual</a>.<br /><br /><b>Fix the sorting of translated content elements</b><br /><br />In order to get the correct sorting of translated content elements I have created a module for tv2fluidge, which fixes the sorting for all translated content elements by setting the database field "sorting" to the sorting of the original content element multiplied with the uid of the language of the translated content element.<br /><br />After processing all pages with the new "<b>Fix sorting</b>" module in tv2fluidge the sorting of the translated content elements finally looked good.<br /><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/-oumgbguOilw/UzQNDxc6TWI/AAAAAAAAIqk/2H4RVtabEbw/s1600/5+-+multilang-fixed-sorting.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://3.bp.blogspot.com/-oumgbguOilw/UzQNDxc6TWI/AAAAAAAAIqk/2H4RVtabEbw/s1600/5+-+multilang-fixed-sorting.png" height="176" width="400" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Page view with fixed sorting</td></tr></tbody></table><br />The new version of tv2fluidge is available on TER and GitHub and I already used it to migrate Websites made with TYPO3 4.5 LTS, TYPO3 4.7 and TYPO3 6.1. As the long awaited TYPO3 6.2 LTS has been released last week, I can start planning the first migration projects (TYPO3 4.5 with TemplaVoila-&gt; migrate to FluidTemplate and Grid Elements -&gt; migrate to TYPO3 6.2 LTS). Now I just have to wait until the major extensions have raised compatibility to TYPO3 6.2 LTS.